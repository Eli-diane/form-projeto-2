<!DOCTYPE html>
<html lang="pt">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Acme Corporation</title>
</head>
<body>
    <h2>Cadastro</h2>
    <form id="cadastro">
        <label for="nome">Nome:</label>
        <input type="text" id="nome" name="nome">
        <br><br>
        <label for="telefone">Telefone:</label>
        <input type="text" id="telefone" name="telefone">
        <br><br>
        <button type="submit">Enviar</button>
    </form>
    <script>
        document.getElementById("cadastro").addEventListener("submit", function(event) {
            event.preventDefault(); // Impede o envio tradicional do formulário
            
            let nome = document.getElementById("nome").value;
            let telefone = document.getElementById("telefone").value;
            
            let dados = localStorage.getItem("csvData") ? JSON.parse(localStorage.getItem("csvData")) : [];
            dados.push([nome, telefone]); // Adiciona novo registro
            
            // Salva os dados atualizados no localStorage
            localStorage.setItem("csvData", JSON.stringify(dados));

            // Prepara o conteúdo do CSV com todos os registros
            let csvContent = "data:text/csv;charset=utf-8,Nome,Telefone\n" + 
                             dados.map(e => e.join(",")).join("\n");

            // Cria um link para baixar o arquivo
            let encodedUri = encodeURI(csvContent);
            let link = document.createElement("a");
            link.setAttribute("href", encodedUri);
            link.setAttribute("download", "result-form.csv");
            document.body.appendChild(link);
            link.click();
        });
    </script>
</body>
</html>
